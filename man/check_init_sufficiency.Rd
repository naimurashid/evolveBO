% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/init_stopping.R
\name{check_init_sufficiency}
\alias{check_init_sufficiency}
\title{Check Initialization Sufficiency via GP Diagnostics}
\usage{
check_init_sufficiency(
  X,
  y,
  checkpoints = list(),
  metrics = c("variance"),
  test_grid = NULL,
  n_test = 200,
  threshold = 0.1,
  window = 2,
  verbose = FALSE
)
}
\arguments{
\item{X}{Design matrix (n x d) of evaluated points}

\item{y}{Response vector (n) of objective values}

\item{checkpoints}{List of previous checkpoint results (for comparison)}

\item{metrics}{Character vector of metrics to track. Options:
\describe{
  \item{"variance"}{Max/mean prediction variance on test grid (recommended)}
  \item{"loo"}{Leave-one-out cross-validation RMSE}
  \item{"hyperparams"}{GP hyperparameter stability}
  \item{"loglik"}{Log marginal likelihood}
}}

\item{test_grid}{Optional test grid for variance computation. If NULL,
a Sobol sequence is generated.}

\item{n_test}{Number of test points for variance computation (default: 200)}

\item{threshold}{Relative change threshold for convergence (default: 0.10)}

\item{window}{Number of consecutive stable checkpoints required (default: 2}

\item{verbose}{Logical: print diagnostic messages (default: FALSE)}
}
\value{
List with:
  \describe{
    \item{metrics}{Named list of computed metric values}
    \item{converged}{Logical: whether convergence detected}
    \item{reason}{Character: reason for convergence, or NULL}
    \item{recommendation}{Character: suggested action}
  }
}
\description{
Fits a GP every `k` points during initialization and checks multiple
convergence metrics to determine if the design space is sufficiently
explored. This can save budget by stopping initialization early when
the GP model has stabilized.
}
\examples{
\dontrun{
# During initialization loop
checkpoints <- list()
for (i in seq(20, n_init, by = 20)) {
  result <- check_init_sufficiency(
    X = design[1:i, ],
    y = responses[1:i],
    checkpoints = checkpoints,
    metrics = c("variance", "loo"),
    threshold = 0.10
  )
  checkpoints <- c(checkpoints, list(result$metrics))

  if (result$converged) {
    message("Initialization sufficient at ", i, " points: ", result$reason)
    break
  }
}
}
}
