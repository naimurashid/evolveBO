% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bo_calibrate.R
\name{select_fidelity_hybrid_staged}
\alias{select_fidelity_hybrid_staged}
\title{Hybrid staged-adaptive fidelity selection with metric-specific thresholds}
\usage{
select_fidelity_hybrid_staged(
  prob_feasible,
  cv_estimate,
  iter,
  fidelity_levels,
  metric = NULL,
  constraint_metrics = NULL,
  cv_threshold_base = 0.1,
  prob_range = c(0.2, 0.8),
  distance_to_best = 1,
  ...
)
}
\arguments{
\item{prob_feasible}{probability of constraint satisfaction}

\item{cv_estimate}{coefficient of variation from objective surrogate}

\item{iter}{current iteration number}

\item{fidelity_levels}{named vector of fidelity levels (possibly dynamic)}

\item{metric}{name of metric being optimized (for metric-specific thresholds)}

\item{constraint_metrics}{character vector of constraint metric names}

\item{cv_threshold_base}{base CV threshold for escalation (default 0.10)}

\item{prob_range}{feasibility probability range for boundary detection}

\item{distance_to_best}{normalized distance to current best (0-1 scale)}

\item{...}{additional arguments (for compatibility)}
}
\value{
name of selected fidelity level
}
\description{
Combines iteration-based staging (BOHB-style) with metric-specific CV thresholds
for escalation. Implements empirically-validated patterns from multi-fidelity BO
literature while handling multi-constraint trial calibration.
}
\details{
Three-stage strategy:
\itemize{
  \item \strong{Stage 1} (exploration): Primarily low fidelity, escalate only for very high uncertainty
  \item \strong{Stage 2} (focused search): Balanced mix, metric-specific CV thresholds
  \item \strong{Stage 3} (refinement): Aggressive high-fidelity promotion for feasible regions
}

Metric-specific CV thresholds:
\itemize{
  \item Constraints (power, type1): 0.10 (tight for binary outcomes, boundary precision critical)
  \item Objective (EN, ET): 0.20 (looser for continuous high-variance metrics)
  \item Near-boundary bonus: 33% tighter thresholds when 0.4 < P(feasible) < 0.7
  \item Near-optimum bonus: 50% tighter when close to current best design
}
}
\references{
Falkner et al. (2018). BOHB: Robust and Efficient Hyperparameter Optimization. ICML.
Jiang et al. (2024). Efficient Hyperparameter Optimization with Adaptive Fidelity. CVPR.
Richter et al. (2022). Improving adaptive seamless designs through Bayesian optimization. Biom J.
}
\keyword{internal}
