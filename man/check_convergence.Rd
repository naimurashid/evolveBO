% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/convergence.R
\name{check_convergence}
\alias{check_convergence}
\title{Check Optimization Convergence}
\usage{
check_convergence(
  history,
  objective = "objective",
  patience = 3,
  improvement_threshold = 0.001,
  acq_flatline_threshold = NULL
)
}
\arguments{
\item{history}{Data frame: optimization history with objective values}

\item{objective}{Character: name of objective column (default: "objective")}

\item{patience}{Integer: number of recent iterations to check for improvement
(default: 3)}

\item{improvement_threshold}{Numeric: relative improvement threshold - smaller
improvements are considered stagnation (default: 1e-3)}

\item{acq_flatline_threshold}{Numeric or NULL: if acquisition scores (column
"acq_score") fall below this for `patience` iterations, consider converged.
NULL disables this check (default: NULL)}
}
\value{
List with:
  \describe{
    \item{converged}{Logical: whether convergence detected}
    \item{reason}{Character: reason for convergence, or NULL if not converged}
    \item{best_objective}{Numeric: best feasible objective value}
  }
}
\description{
Detects if optimization has converged based on recent history.
Useful for early stopping in multi-stage BO.
}
\details{
Checks:
- Improvement stagnation: best objective not improving for `patience` steps
- Acquisition flatline: acquisition scores below threshold (optional)
}
\examples{
\dontrun{
# After each BO iteration
conv <- check_convergence(
  history = fit$history,
  objective = "EN",
  patience = 5,
  improvement_threshold = 0.001
)

if (conv$converged) {
  cat("Converged:", conv$reason, "\n")
  cat("Best objective:", conv$best_objective, "\n")
}
}
}
